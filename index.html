---
layout: default
title: 90mil Radio
description: An independent platform amplifying underrepresented voices in Berlin's sonic landscape. Supporting femme and queer artists, storytellers, and activists through experimental arts, sound, and interdisciplinary practice.
---
<script>
// Global variable to track if we've loaded the data
window.featuredShowLoaded = false;

// Cache configuration
const CACHE_KEY = 'featuredShowData';
const CACHE_DURATION = 30 * 60 * 1000; // 30 minutes in milliseconds

// Function to get cached data
function getCachedData() {
    try {
        const cached = localStorage.getItem(CACHE_KEY);
        if (!cached) return null;
        
        const { data, timestamp } = JSON.parse(cached);
        const now = Date.now();
        
        // Check if cache is still fresh
        if (now - timestamp < CACHE_DURATION) {
            return data;
        } else {
            // Cache expired, remove it
            localStorage.removeItem(CACHE_KEY);
            return null;
        }
    } catch (error) {
        console.error('Error reading cache:', error);
        return null;
    }
}

// Function to cache data
function setCachedData(data) {
    try {
        const cacheObject = {
            data: data,
            timestamp: Date.now()
        };
        localStorage.setItem(CACHE_KEY, JSON.stringify(cacheObject));
    } catch (error) {
        console.error('Error setting cache:', error);
    }
}

// Function to show loading state
function showLoadingState() {
    const showContent = document.querySelector('.show-content');
    
    // Hide the entire content container
    if (showContent) {
        showContent.style.opacity = '0';
        showContent.style.transition = 'opacity 0.3s ease';
    }
}

// Function to hide loading state
function hideLoadingState() {
    const showContent = document.querySelector('.show-content');
    
    // Fade in the entire content container
    if (showContent) {
        showContent.style.opacity = '1';
        showContent.style.transition = 'opacity 0.3s ease';
    }
}

// Function to check and load featured show data
function checkAndLoadFeaturedShow() {
    // Check if we're on the right page and elements exist
    const showImage = document.getElementById('featured-show-image');
    const showTitle = document.getElementById('featured-show-title');
    const showContent = document.querySelector('.show-content');
    
    if (!showImage || !showTitle || !showContent) {
        return false;
    }
    
    // Check if we need to load (either not loaded yet or container is invisible)
    if (!window.featuredShowLoaded || showContent.style.opacity === '0') {
        // First try to load from cache
        const cachedData = getCachedData();
        if (cachedData) {
            populateShowData(cachedData);
            window.featuredShowLoaded = true;
        } else {
            // No cached data, fetch from API
            showLoadingState();
            fetchFeaturedShow();
        }
        return true;
    }
    
    return false;
}

// Function to populate show data (from cache or API)
function populateShowData(showData) {
    const showImage = document.getElementById('featured-show-image');
    const showTitle = document.getElementById('featured-show-title');
    const descriptionEl = document.getElementById('featured-show-description');
    const genresEl = document.getElementById('featured-show-genres');
    
    // Update the show image
    let imageUrl = null;
    if (showData.pictures) {
        imageUrl = showData.pictures.extra_large ||
                  showData.pictures.large ||
                  showData.pictures.medium_large ||
                  showData.pictures.medium ||
                  showData.pictures.small ||
                  showData.pictures.thumbnail;
    }
    
    if (imageUrl && showImage) {
        showImage.src = imageUrl;
        showImage.alt = `${showData.name} artwork`;
        showImage.style.display = 'block';
        
        showImage.onload = function() {
            this.classList.add('loaded');
            this.style.transition = 'opacity 0.3s ease';
            this.style.opacity = '1';
        };
        
        showImage.onerror = function() {
            this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMSkiLz4KPHN2ZyB4PSI3MCIgeT0iNzAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0zIDIyVjJsMTggMTBMMzIyeiIvPgo8L3N2Zz4KPC9zdmc+';
            this.style.opacity = '1';
        };
        
    } else if (showImage) {
        showImage.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMSkiLz4KPHN2ZyB4PSI3MCIgeT0iNzAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0zIDIyVjJsMTggMTBMMzIyeiIvPgo8L3N2Zz4KPC9zdmc+';
        showImage.style.opacity = '1';
    }
    
    // Update the show title with animation
    const title = showData.name.split(' (')[0];
    const subtitle = showData.name.includes('(') ? showData.name.match(/\(([^)]+)\)/)?.[1] : '';
    
    if (showTitle) {
        showTitle.style.transition = 'opacity 0.3s ease';
        showTitle.textContent = title;
    }
    
    // Update the description with animation
    if (descriptionEl) {
        descriptionEl.style.transition = 'opacity 0.3s ease';
        descriptionEl.textContent = showData.description || 'A concept series imagined by Random Kingdom.';
    }
    
    // Update the genres with animation
    if (genresEl) {
        genresEl.style.transition = 'opacity 0.3s ease';
        const genres = showData.tags?.map(tag => tag.name).join(', ') || 'Ambient, Poetry, Soundscape, Radio, Electroacoustic';
        genresEl.textContent = `Genres: ${genres}`;
    }
    
    // Add subtitle if it exists
    if (subtitle && showTitle) {
        const existingSubtitle = showTitle.parentNode.querySelector('.subtitle');
        if (!existingSubtitle) {
            const subtitleElement = document.createElement('h4');
            subtitleElement.className = 'subtitle';
            subtitleElement.textContent = subtitle;
            subtitleElement.style.margin = '0 0 12px 0';
            subtitleElement.style.fontSize = '1.2rem';
            subtitleElement.style.fontStyle = 'italic';
            subtitleElement.style.opacity = '0';
            subtitleElement.style.transition = 'opacity 0.3s ease';
            showTitle.parentNode.insertBefore(subtitleElement, showTitle.nextSibling);
            
            // Fade in subtitle
            setTimeout(() => {
                subtitleElement.style.opacity = '0.9';
            }, 100);
        }
    }
    
    // Fade in all content
    setTimeout(hideLoadingState, 100);
}

// Watch for DOM changes to detect navigation
const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
            // Check if featured show elements were added
            setTimeout(checkAndLoadFeaturedShow, 100);
        }
    });
});

// Start observing the document body for changes
document.addEventListener('DOMContentLoaded', function() {
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
    
    // Initial load
    checkAndLoadFeaturedShow();
});

async function fetchFeaturedShow() {
    try {
        const showImage = document.getElementById('featured-show-image');
        const showTitle = document.getElementById('featured-show-title');
        
        if (!showImage || !showTitle) {
            return;
        }

        const response = await fetch('https://api.mixcloud.com/90milradio/circling-the-whuhula-tales-of-our-i/');
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const showData = await response.json();
        
        // Cache the data
        setCachedData(showData);
        
        // Populate the UI
        populateShowData(showData);
        
        // Mark as loaded
        window.featuredShowLoaded = true;
        
    } catch (error) {
        console.error('Error fetching featured show data:', error);
        
        // Fallback content
        const fallbackData = {
            name: 'Circling the Whuhula (Tales Of Our Inner Kingdoms Ep. 1)',
            description: 'A concept series imagined by Random Kingdom.',
            tags: [
                { name: 'Ambient' },
                { name: 'Poetry' },
                { name: 'Soundscape' },
                { name: 'Radio' },
                { name: 'Electroacoustic' }
            ],
            pictures: null
        };
        
        populateShowData(fallbackData);
        window.featuredShowLoaded = true;
    }
}
</script>
<div class="hero-section">
    <picture>
        <source 
            srcset="assets/images/darkwater/darkwater-320.webp 320w,
                    assets/images/darkwater/darkwater-640.webp 640w,
                    assets/images/darkwater/darkwater-1024.webp 1024w,
                    assets/images/darkwater/darkwater-1920.webp 1920w"
            sizes="(max-width: 320px) 320px,
                   (max-width: 640px) 640px,
                   (max-width: 1024px) 1024px,
                   1920px"
            type="image/webp">
        <img src="assets/images/darkwater/darkwater-1920.webp" alt="Dark water background" class="hero-image">
    </picture>
    <div class="featured-container">
        <div class="featured-left">
            <div class="featured-event">
                <h2>Featured Event</h2>
                <div class="featured-poster">
                    <img src="assets/images/pollen-detailed.jpg" alt="Pollen detailed poster" class="poster-image">
                </div>
                <div class="featured-info">
                    <p>An immersive audio-visual experience exploring the intersection of nature and technology through experimental sound and interdisciplinary practice.</p>
                    <div class="featured-actions">
                        <a href="/shows" class="cta-button">Learn More</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="featured-right">
            <div class="now-playing">
                <h2>Now Playing</h2>
                <p>Live stream placeholder</p>
            </div>
            
            <div class="featured-show">
                <h2>Featured Show</h2>
                <div class="show-content" style="opacity: 0;">
                    <img id="featured-show-image" src="" alt="Show artwork" class="featured-show-image" style="display: block; min-height: 180px; min-width: 180px; background: rgba(255,255,255,0.1);">
                    <div class="show-text">
                        <h3 id="featured-show-title"></h3>
                        <p id="featured-show-description" class="show-description"></p>
                        <p id="featured-show-genres" class="genres"></p>
                        <div class="featured-actions">
                            <a href="/shows#circling-the-whuhula" class="cta-button">Listen Now</a>
                            <a href="/shows" class="cta-secondary">More Shows</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer class="site-footer">
    <a href="https://90mil.berlin/privacypolicy/" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
    <a href="https://www.90mil.berlin/impressum/" target="_blank" rel="noopener noreferrer">Impressum</a>
</footer>